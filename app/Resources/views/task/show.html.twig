{% extends 'base.html.twig' %}

{% block title %}
    Task {{ task.Name }}
{% endblock %}

{% block additional_navbar_pills %}
    {% if is_granted('ROLE_MANAGER') %}
        <li><a href="{{ path('task_create',{'project_id':project.id}) }}">Создать новую задачу</a></li>
        <li><a href="{{ path('subtask_create',{'project_id':project.id,'parent_task_id':task.Id}) }}">Создать подзадачу текущей</a></li>
        {% endif %}
    {% endblock %}

{% block breadcrumps %}
    <h3>
        <a href="{{ path('project_show',{'id':project.Id}) }}">{{ project.Name }}</a>
        &mdash;
        {% for task_parent in task_parents %}
            <a href="{{ path('task_show',{'project_id':project.Id,'task_id':task_parent.Id}) }}">
                {{ task_parent.Name }}
            </a>
            &mdash;
        {% endfor %}
        {{ task.Name }}
    </h3>
{% endblock %}

{% block content %}

    <div>
        <table class="full-task-view">
            <tr>
                <td>Название:</td>
                <td>{{  task.Name }}</td>
            </tr>
            <tr>
                <td>Дата создания:</td>
                <td>{{  task.CreatedAt | localizeddate('long', 'none', 'd MMMM') }}</td>
            </tr>
            <tr>
                <td>Участник:</td>
                <td>{{  username }}</td>
            </tr>
            <tr>
                <td>Описание:</td>
                <td>{{  task.Description }}</td>
            </tr>
            <tr>
                <td>Текущее состояние:</td>
                <td>{{  task.State }}</td>
            </tr>
            <tr>
                <td>Установленный спринт:</td>
                <td>{{  sprint }}</td>
            </tr>
            <tr>
                <td>Предполагаемое время выполнения:</td>
                <td>{{  task.EstimatedTime }}</td>
            </tr>
            <tr>
                <td>Итоговое время выполнения:</td>
                <td>{{  task.SpendedTime }}</td>
            </tr>
        </table>
    </div>

    <ul class="list-group">
        {% for task_child in child_tasks %}
            <li class="list-group-item"><a href="{{ path('task_show', {project_id: project_id, task_id: task_child.id}) }}">{{ task_child.Name }}</a></li>
            {% endfor %}
    </ul>

{% endblock content %}